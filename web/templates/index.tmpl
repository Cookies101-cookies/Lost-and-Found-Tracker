{{define "index"}}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>All Items</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<header>
    <h1><a href="/">Lost & Found</a></h1>
    <nav>
        <a href="/" class="btn btn-primary btn-sm">All Items</a>
        <a href="/items/new" class="btn btn-primary btn-sm">Post Item</a>
    </nav>
</header>

<main>
    <form class="search-bar" method="GET" action="/">
        <input type="text" name="q" placeholder="Search items..." value="{{.Q}}">
        <button type="submit" class="btn btn-primary">Search</button>
        <input type="hidden" name="status" value="{{.Status}}">
    </form>

    <div style="margin-bottom:16px;">
        <a href="/?q={{.Q | urlquery}}" class="btn btn-secondary btn-sm">All</a>
        <a href="/?status=lost&q={{.Q | urlquery}}" class="btn btn-secondary btn-sm">Lost</a>
        <a href="/?status=found&q={{.Q | urlquery}}" class="btn btn-secondary btn-sm">Found</a>
        {{if .Total}}
            <span class="muted" style="margin-left:12px;">{{.Total}} result{{if ne .Total 1}}s{{end}}</span>
        {{end}}
    </div>

    {{if not .Items}}
        {{if .Q}}
            <p>No items match "{{.Q}}". <a href="/" class="btn btn-secondary btn-sm">Clear search</a></p>
        {{else if .Status}}
            <p>No items in "{{.Status}}". <a href="/" class="btn btn-secondary btn-sm">Show all</a></p>
        {{else}}
            <p>No items reported yet. <a href="/items/new" class="btn btn-primary">Be the first to post one!</a></p>
        {{end}}
    {{else}}
        {{range .Items}}
            <div class="card">
                <div class="row">
                    <h3><a href="/items/{{.ID}}">{{.Title}}</a></h3>
                    <span class="pill {{.Status}}">{{.Status}}</span>
                </div>
                {{if .Image}}
                    <img src="/static/uploads/{{.Image}}" alt="{{.Title}}">
                {{end}}
                <p class="muted">{{.CreatedAt.Format "Jan 2, 2006 at 3:04 PM"}}</p>
                <p><strong>Description:</strong> {{.Desc}}</p>
                <p><strong>Contact:</strong> {{.Contact}}</p>
            </div>
        {{end}}
    {{end}}
</main>

<footer>
    <p>&copy; 2025 Lost & Found</p>
</footer>
</body>
</html>
{{end}}
